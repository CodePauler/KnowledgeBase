# 智能知识库前端设计方案

本文档旨在为智能知识库项目规划一个功能全面、用户体验友好的前端界面。设计灵感来源于飞书（Lark），旨在提供一个简洁、高效且协作性强的操作环境。

## 1. 设计哲学与目标

- **简洁直观**: 借鉴飞书的设计语言，采用清晰的布局和导航，减少用户学习成本。
- **信息驱动**: 以知识内容为核心，方便用户快速查找、创建和管理信息。
- **智能交互**: 突出RAG（检索增强生成）聊天机器人的核心功能，使其成为获取知识的智能入口。
- **模块化**: 设计可扩展的组件化架构，便于未来功能迭代。

## 2. 技术栈推荐

- **框架**: **Vue 3+** - 渐进式框架，拥有出色的性能和开发体验。
- **UI 组件库**: **Ant Design Vue 4.x** - Ant Design的Vue实现，提供高质量、类飞书风格的组件。
- **状态管理**: **Pinia** - Vue官方推荐的状态管理库，轻量、直观且对TypeScript支持友好。
- **路由**: **Vue Router 4.x** - Vue的官方路由，用于构建单页应用。
- **HTTP客户端**: **Axios** - 用于与后端API进行通信，提供简洁的API和请求/响应拦截。
- **构建工具**: **Vite** - 提供极速的开发服务器和优化的构建过程。

## 3. 整体布局与架构

应用将采用经典的三栏式布局，确保信息层次清晰，操作流畅。

```
+-----------------------------------------------------------------------------+
|                                  顶部导航栏                                   |
| (全局搜索, 创建按钮, 用户头像)                                               |
+--------------------------------+----------------------------------------------+
|                                |                                              |
|         左侧导航栏             |                  主内容区                      |
| (空间列表, 知识树, AI助手入口)  |  (文档列表, 文档编辑器, 聊天界面, 搜索结果)   |
|                                |                                              |
|                                |                                              |
|                                |                                              |
|                                |                                              |
+--------------------------------+----------------------------------------------+
```

- **顶部导航栏 (Header)**:
  - **全局搜索框**: 允许用户在所有空间中搜索知识。
  - **“新建”按钮**: 快速创建新文档或新空间。
  - **用户头像/菜单**: 显示当前用户信息，提供“设置”、“退出登录”等操作。

- **左侧导航栏 (Sider)**:
  - **空间切换器**: 展示用户可访问的所有知识空间（`Space`），并支持快速切换。
  - **知识树**: 以树状结构（`KnowledgeTreeNode`）展示当前空间下的所有文档和文件夹，支持展开/折叠。
  - **AI助手入口**: 一个固定的入口，点击后在主内容区打开聊天界面。

- **主内容区 (Content)**:
  - 这是应用的核心工作区域，根据用户的操作动态展示不同内容。

## 4. 核心页面与组件设计

### 4.1. 认证页面

- **登录页**:
  - 表单包含：用户名/邮箱、密码。
  - 功能：登录、跳转到注册页。
- **注册页**:
  - 表单包含：用户名、邮箱、密码、确认密码。
  - 功能：注册新用户。

### 4.2. 主应用界面

#### a. 知识空间视图 (Space View)

- **默认视图**: 进入一个空间后，主内容区展示该空间的根目录，以卡片或列表形式显示顶层文档和文件夹。
- **操作**: 支持新建文件夹、上传文件、新建文档。

#### b. 知识树 (Knowledge Tree)

- **位置**: 左侧导航栏。
- **功能**:
  - 显示文件夹和不同类型的文档（`KnowledgeType`）。
  - 右键点击文件/文件夹，弹出上下文菜单（重命名、移动、删除）。
  - 支持拖拽移动文件和文件夹，实现快速整理。
  - 点击文档项，在主内容区打开该文档。

#### c. 文档视图 (Document View)

- **文档查看器**:
  - 根据文档类型（如Markdown, PDF, Office文档）渲染内容。
  - 对于可编辑的文本文档，提供一个富文本/Markdown编辑器。
  - 顶部显示面包屑导航，清晰展示文档在知识树中的位置。
- **文档编辑器**:
  - 实现 `KnowledgeUpdateRequestDto` 接口，支持内容的实时保存或手动保存。
  - 工具栏提供丰富的格式化选项。

#### d. 智能聊天视图 (Chat View)

- **界面**: 经典的即时通讯界面。
  - 顶部显示对话标题（例如“AI 助手”）。
  - 中间是对话历史记录区。
  - 底部是问题输入框。
- **交互流程**:
  1. 用户输入问题 (`ChatRequestDto`)。
  2. 聊天记录区显示用户的提问。
  3. 显示加载状态，等待后端响应。
  4. 收到 `ChatResponseDto` 后，显示AI的回答。
  5. **关键功能**: 将回答中引用的来源 (`SourceDto`) 以卡片或链接的形式清晰地展示出来，用户点击后可直接跳转到原始知识文档。

#### e. 搜索结果视图 (Search Results View)

- **触发**: 在顶部导航栏使用全局搜索后，主内容区切换到此视图。
- **展示**:
  - 以列表形式展示 `KnowledgeSearchResultDto` 的结果。
  - 每个结果项应包含：文档标题、摘要/高亮片段、所属空间和路径。
  - 点击结果项可直接跳转到该文档。

## 5. 建议的前端项目文件结构

```
/Frontend
|-- /public
|-- /src
|   |-- /api              # API请求模块 (e.g., knowledgeApi.js, authApi.js)
|   |-- /assets           # 静态资源 (images, fonts)
|   |-- /components       # 通用UI组件 (e.g., TheHeader.vue, SearchInput.vue)
|   |-- /composables      # Vue Composition API 可复用逻辑
|   |-- /router           # 路由配置 (index.js)
|   |-- /stores           # Pinia 状态管理
|   |-- /styles           # 全局样式和主题
|   |-- /utils            # 工具函数
|   |-- /views            # 页面级组件 (路由组件)
|   |   |-- /auth         # 登录、注册视图
|   |   |-- /workspace    # 主工作区
|   |   |   |-- ChatView.vue
|   |   |   |-- DocView.vue
|   |   |   `-- SpaceView.vue
|   |   `-- /settings     # 用户设置视图
|   |-- App.vue           # 应用根组件
|   `-- main.js           # 应用入口文件
|-- .gitignore
|-- package.json
|-- vite.config.js
`-- README.md
```
